<mat-card class="receta-card">
  <mat-card-header>
    <mat-card-title class="titulo">Crear receta</mat-card-title>
  </mat-card-header>

  <mat-card-content>
    <form [formGroup]="recetaForm" class="receta-form">
      <div class="form-container">

        <!-- Primera fila: Nombre y Tiempo -->
        <div class="row">
          <div class="campo-wrapper field-nombre">
            <label class="label-campo">Nombre</label>
            <mat-form-field appearance="outline">
              <input matInput formControlName="nombre" placeholder="Nombre de la receta">
            </mat-form-field>
          </div>

          <div class="campo-wrapper field-tiempo">
            <label class="label-campo">Tiempo</label>
            <mat-form-field appearance="outline">
              <input matInput formControlName="tiempo" placeholder="Ej: 30 min">
            </mat-form-field>
          </div>
        </div>

        <!-- Tipo de comida -->
        <div class="row">
          <div class="campo-wrapper field-tipo">
            <label class="label-campo">Tipo de comida</label>
            <mat-form-field appearance="outline">
              <mat-select formControlName="tipoComida">
                <mat-option value="desayuno">Desayuno</mat-option>
                <mat-option value="almuerzo">Almuerzo</mat-option>
                <mat-option value="snack">Snack</mat-option>
                <mat-option value="cena">Cena</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>

        <!-- Sección Informe Nutricional -->
        <div class="seccion-nutricional">
          <h3 class="subtitulo-nutricional">Informe Nutricional</h3>

          <!-- Primera fila nutricional -->
          <div class="row-nutricional">
            <div class="campo-wrapper field-nutricion">
              <label class="label-campo">Peso de la porción (g)</label>
              <mat-form-field appearance="outline">
                <input matInput type="number" formControlName="pesoPorcion">
              </mat-form-field>
            </div>

            <div class="campo-wrapper field-nutricion">
              <label class="label-campo">Calorías (kcal)</label>
              <mat-form-field appearance="outline">
                <input matInput type="number" formControlName="calorias">
              </mat-form-field>
            </div>
          </div>

          <!-- Segunda fila nutricional -->
          <div class="row-nutricional">
            <div class="campo-wrapper field-nutricion">
              <label class="label-campo">Grasa saturada (g)</label>
              <mat-form-field appearance="outline">
                <input matInput type="number" formControlName="grasaSaturada">
              </mat-form-field>
            </div>

            <div class="campo-wrapper field-nutricion">
              <label class="label-campo">Grasa trans (g)</label>
              <mat-form-field appearance="outline">
                <input matInput type="number" formControlName="grasaTrans">
              </mat-form-field>
            </div>
          </div>

          <!-- Tercera fila nutricional -->
          <div class="row-nutricional">
            <div class="campo-wrapper field-nutricion">
              <label class="label-campo">Proteína (g)</label>
              <mat-form-field appearance="outline">
                <input matInput type="number" formControlName="proteina">
              </mat-form-field>
            </div>

            <div class="campo-wrapper field-nutricion">
              <label class="label-campo">Azúcares (g)</label>
              <mat-form-field appearance="outline">
                <input matInput type="number" formControlName="azucares">
              </mat-form-field>
            </div>
          </div>
        </div>

        <!-- Descripción -->
        <div class="campo-wrapper field-descripcion">
          <label class="label-campo">Descripción</label>
          <mat-form-field appearance="outline">
            <textarea matInput formControlName="descripcion" rows="4" placeholder="Describe tu receta..."></textarea>
          </mat-form-field>
        </div>

        <!-- Imagen -->
        <div class="imagen-container">
          <div class="imagen-upload" (click)="fileInput.click()">
            <input #fileInput type="file" accept="image/*" (change)="onFileSelected($event)" hidden>

            <ng-container *ngIf="!imagenPreview; else imagenPreviewTpl">
              <div class="placeholder-imagen">
                <mat-icon class="icono-camara">photo_camera</mat-icon>
                <p>Subir imagen</p>
              </div>
            </ng-container>

            <ng-template #imagenPreviewTpl>
              <img [src]="imagenPreview" alt="Vista previa" class="imagen-preview">
            </ng-template>
          </div>
        </div>

      </div>
    </form>
  </mat-card-content>

  <mat-card-actions class="botones-accion">
    <button mat-raised-button class="btn-modificar" (click)="modificar()">Modificar</button>
    <button mat-raised-button class="btn-guardar" (click)="guardar()">Guardar</button>
  </mat-card-actions>
</mat-card>

