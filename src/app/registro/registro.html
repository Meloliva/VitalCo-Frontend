<div class="registro-container">
  <!-- Paso 1: Crear cuenta de usuario -->
  <div class="registro-card" *ngIf="step() === 1">
    <img src="/Images/iconos/shaperegistro.png" alt="" class="decorative-circle circle-1">
    <img src="/Images/iconos/shaperegistro1.png" alt="" class="decorative-circle circle-2">

    <div class="logo-container">
      <img src="/Images/Logos/logoregistro.png" alt="VitalCo" class="logo">
    </div>

    <div class="progress-bar">
      <div class="progress-fill step-1"></div>
    </div>

    <h2>Crea su cuenta de usuario..</h2>

    <form [formGroup]="registroForm" (ngSubmit)="nextStep()">
      <div class="form-row">
        <div class="form-group">
          <label>Nombre:</label>
          <input type="text" formControlName="nombre">
        </div>
        <div class="form-group">
          <label>Genero:</label>
          <select formControlName="genero">
            <option value="">Seleccionar</option>
            <option value="masculino">Masculino</option>
            <option value="femenino">Femenino</option>
            <option value="otro">Otro</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Apellido:</label>
          <input type="text" formControlName="apellido">
        </div>
        <div class="form-group">
          <label>Correo:</label>
          <input type="email" formControlName="correo">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Dni:</label>
          <input type="text" formControlName="dni" maxlength="8">
        </div>
        <div class="form-group">
          <label>Password:</label>
          <div class="input-with-icon">
            <input
              [type]="showPassword ? 'text' : 'password'"
              formControlName="password"
              class="password-input"
            />
            <span class="icon-eye" (click)="togglePasswordVisibility()">
              <img src="/Images/iconos/eye-icon.png" alt="Mostrar/Ocultar">
            </span>
          </div>
        </div>
      </div>

      <div *ngIf="errorMessage" style="color: red; margin-bottom: 15px; text-align: center;">
        {{ errorMessage }}
      </div>

      <button type="submit" class="btn-registrar" [disabled]="!registroForm.valid || isLoading">
        <span *ngIf="!isLoading">Registrar</span>
        <span *ngIf="isLoading">Cargando...</span>
      </button>
    </form>
  </div>

  <!-- Paso 2: Datos profesionales -->
  <div class="registro-card" *ngIf="step() === 2">
    <img src="/Images/iconos/shaperegistro.png" alt="" class="decorative-circle circle-1">
    <img src="/Images/iconos/shaperegistro1.png" alt="" class="decorative-circle circle-2">

    <div class="header-with-back">
      <button class="btn-back" (click)="goBack()">←</button>
      <div class="logo-container">
        <img src="/Images/Logos/logoregistro.png" alt="VitalCo" class="logo">
      </div>
    </div>

    <div class="progress-bar">
      <div class="progress-fill step-2"></div>
    </div>

    <h2>Datos Profesionales</h2>

    <form [formGroup]="registroProfesionalForm" (ngSubmit)="nextStep()">
      <div class="form-group">
        <label>Asociación:</label>
        <input type="text" formControlName="asociacion" placeholder="Nombre de la asociación">
      </div>

      <div class="form-group">
        <label>Universidad:</label>
        <input type="text" formControlName="universidad" placeholder="Nombre de la universidad">
      </div>

      <div class="form-group">
        <label>Grado Académico:</label>
        <input type="text" formControlName="gradoAcademico" placeholder="Ej: Licenciado, Magíster">
      </div>

      <div class="form-group">
        <label>Turno:</label>
        <select formControlName="turno">
          <option value="">Seleccionar turno</option>
          <option *ngFor="let turno of turnos" [value]="turno.id">
            {{ turno.inicioTurno }} - {{ turno.finTurno }}
          </option>
        </select>
      </div>

      <div *ngIf="errorMessage" style="color: red; margin-bottom: 15px; text-align: center;">
        {{ errorMessage }}
      </div>

      <button type="submit" class="btn-registrar"
              [disabled]="!registroProfesionalForm.valid || isLoading">
        <span *ngIf="!isLoading">Completar Registro</span>
        <span *ngIf="isLoading">Registrando...</span>
      </button>
    </form>
  </div>

  <!-- Paso 3: Registro exitoso -->
  <div class="registro-card success-card" *ngIf="step() === 3">
    <img src="/Images/iconos/shaperegistro.png" alt="" class="decorative-circle circle-1">
    <img src="/Images/iconos/shaperegistro1.png" alt="" class="decorative-circle circle-2">

    <div class="header-with-back">
      <button class="btn-back" (click)="goBack()">←</button>
      <div class="logo-container">
        <img src="/Images/Logos/logoregistro.png" alt="VitalCo" class="logo">
      </div>
    </div>

    <div class="progress-bar">
      <div class="progress-fill step-3"></div>
    </div>

    <div class="success-content">
      <div class="success-box">
        <div class="success-icon">
          <img src="/Images/iconos/comprobadoregistro.png" alt="Éxito" class="check-image">
        </div>
        <h2>¡Registro Exitoso!</h2>
        <p>Se ha registrado correctamente</p>

        <div class="button-stack">
          <button class="btn-iniciar" (click)="iniciar()">Iniciar</button>
          <button class="btn-cancelar" (click)="cancelar()">Cancelar</button>
        </div>
      </div>
    </div>
  </div>
</div>
